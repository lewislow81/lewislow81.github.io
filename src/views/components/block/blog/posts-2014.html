<blog-posts-2014>

  <y class="render-auto-normal relative xs:px-4 xs:py-0 sm:px-8 md:px-8 lg:px-0"
     id="2014">

    <y class="px-2 text-md text-red-400"
       if="{ error }">
      Data is missing.
    </y>

    <text-year
      text="2014">
    </text-year>

    <y class="sticky top-0 right-32 float-right">">

      <card-total-posts
        timeline="2014"
        timelineid="twoFourteen"
        bgcolor="bg-blue-700">
      </card-total-posts>

    </y>

    <y class="flex flex-wrap justify-start items-start">
      <y each="{ data in posts }">

        <card-blog-posts
          inputid="{ data.id }"
          labelid="{ data.id }"
          url="{ data.url }"
          urloption="{ data.urloption }"
          imagelow="{ data.imagelow }"
          imagehigh="{ data.imagehigh }"
          imageheight="h-64"
          popimageid="pop-image-2014"
          imagecaption="{ data.content }"
          content="{ data.content }"
          date="{ data.date }"
          xsscreen="xs:max-w-md"
          smscreen="sm:max-w-full"
          mdscreen="md:max-w-md">
        </card-blog-posts>

      </y>
    </y>

    <misc-divider-bar
      opacity="75">
    </misc-divider-bar>

  </y>


  <script>
    export default {
      onMounted() {

        const self = this
        self.posts = []

        const base = './assets/data'
        const url = base + '/posts/2014.json'

        fetch(url)
          .then(res => {
            res.json()
              .then(data => {
                delete self.error
                self.posts = data
                self.update()
                totalPosts('twoFourteen', data)
              })
              .catch(error => {
                self.error = error
                self.update()
              })
          })

      },
      onUpdated() {

        // see `assets/js/components/_image_popper.js`
        popup.imageNotTouchDevice('.pop-image-2014')

        // lazyload low-res, hi-res image
        krunch.adaptiveImageLoader()

      }
    }
  </script>

</blog-posts-2014>
