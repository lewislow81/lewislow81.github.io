function asynchronous_adapter(){var e,t;e=this,t=function(e){"use strict";function t(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}var r={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,r){if("function"!=typeof r)throw new TypeError("Callback must be a function");var o=t(this),n=void 0;(n=o[e])||(n=o[e]=[]),n.indexOf(r)&&n.push(r)},off:function(e,r){var o,n=t(this),a=void 0;r?-1!==(o=(a=n[e]).indexOf(r))&&a.splice(o,1):n[e]=[]},trigger:function(e,r,o){var n;if(n=t(this)[e])for(var a=0;a<n.length;a++)(0,n[a])(r,o)}},o={instrument:!1};function n(e,t){if(2!==arguments.length)return o[e];o[e]=t}r.mixin(o);var a=[];function i(e,t,r){1===a.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:Date.now(),error:o["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var e=0;e<a.length;e++){var t=a[e],r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),o.trigger(t.name,t.payload)}a.length=0},50)}function c(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e;var r=new this(l,t);return y(r,e),r}function l(){}var s=void 0,u=1,h=2,f={error:null};function d(e){try{return e.then}catch(e){return f.error=e,f}}var m=void 0;function p(){try{var e=m;return m=null,e.apply(this,arguments)}catch(e){return f.error=e,f}}function v(e){return m=e,p}function g(e,t,r){if(t.constructor===e.constructor&&r===G&&e.constructor.resolve===c)!function(e,t){t._state===u?_(e,t._result):t._state===h?(t._onError=null,b(e,t._result)):w(t,void 0,function(r){t===r?_(e,r):y(e,r)},function(t){return b(e,t)})}(e,t);else if(r===f){var n=f.error;f.error=null,b(e,n)}else"function"==typeof r?function(e,t,r){o.async(function(e){var o=!1,n=v(r).call(t,function(r){o||(o=!0,t===r?_(e,r):y(e,r))},function(t){o||(o=!0,b(e,t))},"Settle: "+(e._label||" unknown promise"));if(!o&&n===f){o=!0;var a=f.error;f.error=null,b(e,a)}},e)}(e,t,r):_(e,t)}function y(e,t){var r,o;e===t?_(e,t):(o=typeof(r=t),null===r||"object"!==o&&"function"!==o?_(e,t):g(e,t,d(t)))}function C(e){e._onError&&e._onError(e._result),E(e)}function _(e,t){e._state===s&&(e._result=t,e._state=u,0===e._subscribers.length?o.instrument&&i("fulfilled",e):o.async(E,e))}function b(e,t){e._state===s&&(e._state=h,e._result=t,o.async(C,e))}function w(e,t,r,n){var a=e._subscribers,i=a.length;e._onError=null,a[i]=t,a[i+u]=r,a[i+h]=n,0===i&&e._state&&o.async(E,e)}function E(e){var t=e._subscribers,r=e._state;if(o.instrument&&i(r===u?"fulfilled":"rejected",e),0!==t.length){for(var n=void 0,a=void 0,c=e._result,l=0;l<t.length;l+=3)n=t[l],a=t[l+r],n?L(r,n,a,c):a(c);e._subscribers.length=0}}function L(e,t,r,o){var n,a="function"==typeof r;if(n=a?v(r)(o):o,t._state!==s);else if(n===t)b(t,new TypeError("A promises callback cannot return that same promise."));else if(n===f){var i=f.error;f.error=null,b(t,i)}else a?y(t,n):e===u?_(t,n):e===h&&b(t,n)}function G(e,t,r){var n=this._state;if(n===u&&!e||n===h&&!t)return o.instrument&&i("chained",this,this),this;this._onError=null;var a=new this.constructor(l,r),c=this._result;if(o.instrument&&i("chained",this,a),n===s)w(this,a,e,t);else{var f=n===u?e:t;o.async(function(){return L(n,a,f,c)})}return a}var O=function(){function e(e,t,r,o){this._instanceConstructor=e,this.promise=new e(l,o),this._abortOnReject=r,this._isUsingOwnPromise=e===F,this._isUsingOwnResolve=e.resolve===c,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var r=t.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(t)},e.prototype._enumerate=function(e){for(var t=this.length,r=this.promise,o=0;r._state===s&&o<t;o++)this._eachEntry(e[o],o,!0);this._checkFullfillment()},e.prototype._checkFullfillment=function(){0===this._remaining&&_(this.promise,this._result)},e.prototype._settleMaybeThenable=function(e,t,r){var o=this._instanceConstructor;if(this._isUsingOwnResolve){var n=d(e);if(n===G&&e._state!==s)e._onError=null,this._settledAt(e._state,t,e._result,r);else if("function"!=typeof n)this._settledAt(u,t,e,r);else if(this._isUsingOwnPromise){var a=new o(l);g(a,e,n),this._willSettleAt(a,t,r)}else this._willSettleAt(new o(function(t){return t(e)}),t,r)}else this._willSettleAt(o.resolve(e),t,r)},e.prototype._eachEntry=function(e,t,r){null!==e&&"object"==typeof e?this._settleMaybeThenable(e,t,r):this._setResultAt(u,t,e,r)},e.prototype._settledAt=function(e,t,r,o){var n=this.promise;n._state===s&&(this._abortOnReject&&e===h?b(n,r):(this._setResultAt(e,t,r,o),this._checkFullfillment()))},e.prototype._setResultAt=function(e,t,r,o){this._remaining--,this._result[t]=r},e.prototype._willSettleAt=function(e,t,r){var o=this;w(e,void 0,function(e){return o._settledAt(u,t,e,r)},function(e){return o._settledAt(h,t,e,r)})},e}();function M(e,t,r){this._remaining--,this._result[t]=e===u?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}var R="rsvp_"+Date.now()+"-",I=0,F=function(){function e(t,r){this._id=I++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],o.instrument&&i("created",this),l!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var r=!1;try{t(function(t){r||(r=!0,y(e,t))},function(t){r||(r=!0,b(e,t))})}catch(t){b(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(e){var t=this;o.after(function(){t._onError&&o.trigger("error",e,t._label)})},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})},t)},e}();function A(e,t){return{then:function(r,o){return e.call(t,r,o)}}}function S(e,t){var r=function(){for(var r=arguments.length,o=new Array(r+1),n=!1,a=0;a<r;++a){var i=arguments[a];if(!n){if((n=T(i))===f){var c=f.error;f.error=null;var s=new F(l);return b(s,c),s}n&&!0!==n&&(i=A(n,i))}o[a]=i}var u=new F(l);return o[r]=function(e,r){e?b(u,e):void 0===t?y(u,r):!0===t?y(u,function(e){for(var t=e.length,r=new Array(t-1),o=1;o<t;o++)r[o-1]=e[o];return r}(arguments)):Array.isArray(t)?y(u,function(e,t){for(var r={},o=e.length,n=new Array(o),a=0;a<o;a++)n[a]=e[a];for(var i=0;i<t.length;i++)r[t[i]]=n[i+1];return r}(arguments,t)):y(u,r)},n?function(e,t,r,o){return F.all(t).then(function(t){return P(e,t,r,o)})}(u,o,e,this):P(u,o,e,this)};return r.__proto__=e,r}function P(e,t,r,o){if(v(r).apply(o,t)===f){var n=f.error;f.error=null,b(e,n)}return e}function T(e){return null!==e&&"object"==typeof e&&(e.constructor===F||d(e))}function N(e,t){return F.all(e,t)}F.all=function(e,t){return Array.isArray(e)?new O(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},F.race=function(e,t){var r=new this(l,t);if(!Array.isArray(e))return b(r,new TypeError("Promise.race must be called with an array")),r;for(var o=0;r._state===s&&o<e.length;o++)w(this.resolve(e[o]),void 0,function(e){return y(r,e)},function(e){return b(r,e)});return r},F.resolve=c,F.reject=function(e,t){var r=new this(l,t);return b(r,e),r},F.prototype._guidKey=R,F.prototype.then=G;var k=function(e){function t(t,r,o){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(O);function j(e,t){return Array.isArray(e)?new k(F,e,t).promise:F.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function x(e,t){return F.race(e,t)}k.prototype._setResultAt=M;var V=Object.prototype.hasOwnProperty,U=function(e){function t(t,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments[3];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,o,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&_(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,r=[];for(var o in e)V.call(e,o)&&r.push({position:o,entry:e[o]});var n=r.length;this._remaining=n;for(var a=void 0,i=0;t._state===s&&i<n;i++)a=r[i],this._eachEntry(a.entry,a.position)},t}(O);function q(e,t){return null===e||"object"!=typeof e?F.reject(new TypeError("Promise.hash must be called with an object"),t):new U(F,e,t).promise}var B=function(e){function t(t,r,o){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(U);function D(e,t){return null===e||"object"!=typeof e?F.reject(new TypeError("RSVP.hashSettled must be called with an object"),t):new B(F,e,!1,t).promise}function z(e){throw setTimeout(function(){throw e}),e}function W(e){var t={resolve:void 0,reject:void 0};return t.promise=new F(function(e,r){t.resolve=e,t.reject=r},e),t}B.prototype._setResultAt=M;var J=function(e){function t(t,r,o,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,n,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,o,n){var a=t.length||0;this.length=a,this._remaining=a,this._result=new Array(a),this._mapFn=n,this._enumerate(t)},t.prototype._setResultAt=function(e,t,r,o){if(o){var n=v(this._mapFn)(r,t);n===f?this._settledAt(h,t,n.error,!1):this._eachEntry(n,t,!1)}else this._remaining--,this._result[t]=r},t}(O);function H(e,t,r){return Array.isArray(e)?"function"!=typeof t?F.reject(new TypeError("RSVP.map expects a function as a second argument"),r):new J(F,e,t,r).promise:F.reject(new TypeError("RSVP.map must be called with an array"),r)}function Q(e,t){return F.resolve(e,t)}function Y(e,t){return F.reject(e,t)}var X={},K=function(e){function t(t,r,o,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,n,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,o,n){var a=t.length||0;this.length=a,this._remaining=a,this._result=new Array(a),this._filterFn=n,this._enumerate(t)},t.prototype._checkFullfillment=function(){0===this._remaining&&(this._result=this._result.filter(function(e){return e!==X}),_(this.promise,this._result))},t.prototype._setResultAt=function(e,t,r,o){if(o){this._result[t]=r;var n=v(this._filterFn)(r,t);n===f?this._settledAt(h,t,n.error,!1):this._eachEntry(n,t,!1)}else this._remaining--,r||(this._result[t]=X)},t}(O);function Z(e,t,r){return"function"!=typeof t?F.reject(new TypeError("RSVP.filter expects function as a second argument"),r):F.resolve(e,r).then(function(e){if(!Array.isArray(e))throw new TypeError("RSVP.filter must be called with an array");return new K(F,e,t,r).promise})}var $=0,ee=void 0;function te(e,t){le[$]=e,le[$+1]=t,2===($+=2)&&ge()}var re="undefined"!=typeof window?window:void 0,oe=re||{},ne=oe.MutationObserver||oe.WebKitMutationObserver,ae="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ie="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function ce(){return function(){return setTimeout(se,1)}}var le=new Array(1e3);function se(){for(var e=0;e<$;e+=2)(0,le[e])(le[e+1]),le[e]=void 0,le[e+1]=void 0;$=0}var ue,he,fe,de,me,pe,ve,ge=void 0;function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ae?(me=process.nextTick,pe=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(pe)&&"0"===pe[1]&&"10"===pe[2]&&(me=setImmediate),ge=function(){return me(se)}):ne?(he=0,fe=new ne(se),de=document.createTextNode(""),fe.observe(de,{characterData:!0}),ge=function(){return de.data=he=++he%2}):ie?((ue=new MessageChannel).port1.onmessage=se,ge=function(){return ue.port2.postMessage(0)}):ge=void 0===re&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(ee=e.runOnLoop||e.runOnContext)?function(){ee(se)}:ce()}catch(e){return ce()}}():ce(),o.async=te,o.after=function(e){return setTimeout(e,0)};var Ce=function(e,t){return o.async(e,t)};function _e(){o.on.apply(o,arguments)}function be(){o.off.apply(o,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var we=window.__PROMISE_INSTRUMENTATION__;for(var Ee in n("instrument",!0),we)we.hasOwnProperty(Ee)&&_e(Ee,we[Ee])}var Le=(ye(ve={asap:te,Promise:F,EventTarget:r,all:N,allSettled:j,race:x,hash:q,hashSettled:D,rethrow:z,defer:W,denodeify:S,configure:n,on:_e,off:be,resolve:Q,reject:Y,map:H},"async",Ce),ye(ve,"filter",Z),ve);e.default=Le,e.asap=te,e.Promise=F,e.EventTarget=r,e.all=N,e.allSettled=j,e.race=x,e.hash=q,e.hashSettled=D,e.rethrow=z,e.defer=W,e.denodeify=S,e.configure=n,e.on=_e,e.off=be,e.resolve=Q,e.reject=Y,e.map=H,e.async=Ce,e.filter=Z,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RSVP={})}!function(e,t){"use strict";asynchronous_adapter();var r=t.head||t.getElementsByTagName("head")[0],o=[],n=function(e,t){try{return localStorage.setItem("golemCacheMecha-"+e,JSON.stringify(t)),!0}catch(a){if(a.name.toUpperCase().indexOf("QUOTA")>=0){var r,o=[];for(r in localStorage)0===r.indexOf("golemCacheMecha-")&&o.push(JSON.parse(localStorage[r]));return o.length?(o.sort(function(e,t){return e.stamp-t.stamp}),golemCacheMecha.remove(o[0].key),n(e,t)):void 0}return}},a=function(e){return(t=e.url,new RSVP.Promise(function(e,r){var o=new XMLHttpRequest;o.open("GET",t),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||0===o.status&&o.responseText?e({content:o.responseText,type:o.getResponseHeader("content-type")}):r(new Error(o.statusText)))},setTimeout(function(){o.readyState<4&&o.abort()},golemCacheMecha.timeout),o.send()})).then(function(t){var r=i(e,t);return e.skipCache||n(e.key,r),r});var t},i=function(e,t){var r=+new Date;return e.data=t.content,e.originalType=t.type,e.type=e.type||t.type,e.skipCache=e.skipCache||!1,e.stamp=r,e.expire=r+60*(e.expire||5e3)*60*1e3,e},c=function(e){var t,r,o;if(e.url)return e.key=e.key||e.url,t=golemCacheMecha.get(e.key),e.execute=!1!==e.execute,o=function(e,t){return!e||e.expire-+new Date<0||t.unique!==e.unique||golemCacheMecha.isValidItem&&!golemCacheMecha.isValidItem(e,t)}(t,e),e.live||o?(e.unique&&(e.url+=(e.url.indexOf("?")>0?"&":"?")+"golemCacheMecha-unique="+e.unique),r=a(e),e.live&&!o&&(r=r.then(function(e){return e},function(){return t}))):(t.type=e.type||t.originalType,t.execute=e.execute,r=new RSVP.Promise(function(e){e(t)})),r},l={default:function(e){var o=t.createElement("script");o.defer=!0,o.text=e.data,r.appendChild(o)}},s=function(e){return e.map(function(e){return e.execute&&function(e){e.type&&l[e.type]?l[e.type](e):l.default(e)}(e),e})},u=function(){var e,t,r=[];for(e=0,t=arguments.length;e<t;e++)r.push(c(arguments[e]));return RSVP.all(r)},h=function(){var e=u.apply(null,arguments),t=this.then(function(){return e}).then(s);return t.thenRequire=h,t};e.golemCacheMecha={add:function(){for(var e=0,t=arguments.length;e<t;e++)arguments[e].execute=!1!==arguments[e].execute,arguments[e].once&&o.indexOf(arguments[e].url)>=0?arguments[e].execute=!1:!1!==arguments[e].execute&&o.indexOf(arguments[e].url)<0&&o.push(arguments[e].url);var r=u.apply(null,arguments).then(s);return r.thenRequire=h,console.log("INFO: GolemCacheMecha initializing"),console.log("INFO: Store assets to folder: /golemCacheMecha-"),r},remove:function(e){return localStorage.removeItem("golemCacheMecha-"+e),this},get:function(e){var t=localStorage.getItem("golemCacheMecha-"+e);try{return JSON.parse(t||"false")}catch(e){return!1}},clear:function(e){var t,r,o=+new Date;for(t in localStorage)(r=t.split("golemCacheMecha-")[1])&&(!e||this.get(r).expire<=o)&&this.remove(r);return this},isValidItem:null,timeout:5e3,addHandler:function(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){l[e]=t})},removeHandler:function(e){golemCacheMecha.addHandler(e,void 0)}},golemCacheMecha.clear(!0)}(this,document);var GolemCacheMecha={version:"1.0.0",options:{debug:!1,localCacheFolder:"golemCacheMecha",useDataURI:!1,chromeQuota:10485760,usePersistentCache:!0,cacheClearSize:0,headers:{},withCredentials:!1,skipURIencoding:!1,androidFilesystemRoot:null,timeout:0},overridables:{hash:function(e){function t(e,t,r){for(;0<r--;)e.push(t)}function r(e,t){return e<<t|e>>>32-t}function o(e,t,r){return e^t^r}function n(e,t){var r=(65535&t)+(65535&e);return(65535&(t>>>16)+(e>>>16)+(r>>>16))<<16|65535&r}var a="0123456789abcdef";return function(e){for(var t,r=[],o=4*e.length,n=0;n<o;n+=1)t=e[n>>2]>>8*(3-n%4),r.push(a.charAt(t>>4&15)+a.charAt(15&t));return r.join("")}(function(e,a){var i,c,l,s,u,h=e.length,f=1732584193,d=4023233417,m=2562383102,p=271733878,v=3285377520,g=[];t(g,1518500249,20),t(g,1859775393,20),t(g,2400959708,20),t(g,3395469782,20),e[a>>5]|=128<<24-a%32,e[15+(a+65>>9<<4)]=a;for(var y=0;y<h;y+=16){i=f,c=d,l=m,s=p,u=v;for(var C=0,_=[];C<80;C+=1){_[C]=C<16?e[C+y]:r(_[C-3]^_[C-8]^_[C-14]^_[C-16],1);var b=function(e,t,r,o,n){var a=(65535&n)+(65535&e)+(65535&t)+(65535&r)+(65535&o);return(65535&(n>>>16)+(e>>>16)+(t>>>16)+(r>>>16)+(o>>>16)+(a>>>16))<<16|65535&a}(C<20?c&l^~c&s:C<40?o(c,l,s):C<60?c&l^c&s^l&s:o(c,l,s),u,g[C],_[C],r(i,5));u=s,s=l,l=r(c,30),c=i,i=b}f=n(f,i),d=n(d,c),m=n(m,l),p=n(p,s),v=n(v,u)}return[f,d,m,p,v]}(function(e){for(var t=[],r=8*e.length,o=0;o<r;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<24-o%32;return t}(e).slice(),8*e.length))},log:function(e,t){"use strict";GolemCacheMecha.options.debug&&(t===LOG_LEVEL_INFO&&(e="INFO: "+e),t===LOG_LEVEL_WARNING&&(e="WARN: "+e),t===LOG_LEVEL_ERROR&&(e="ERROR: "+e),console.log(e))}},ready:!1,attributes:{}},LOG_LEVEL_INFO=1,LOG_LEVEL_WARNING=2,LOG_LEVEL_ERROR=3;function create(e){var t=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=e;r.firstChild;)t.appendChild(r.firstChild);return t}!function(e){"use strict";var t={sanitizeURI:function(e){return GolemCacheMecha.options.skipURIencoding?e:(e.length>=2&&'"'===e[0]&&'"'===e[e.length-1]&&(e=e.substr(1,e.length-2)),encodeURI(e))},URI:function(e){e||(e="");var t=e.match(/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/);this.scheme=t[1]||null,this.authority=t[2]||null,this.path=t[3]||null,this.query=t[4]||null,this.fragment=t[5]||null},URIGetFileName:function(e){if(e){var t=e.lastIndexOf("/");if(t)return e.substr(t+1).toLowerCase()}},URIGetPath:function(e){if(e)return t.URI(e).path.toLowerCase()},fileGetExtension:function(e){if(!e)return"";var t=(e=e.split("?")[0]).split(".").pop();return!t||t.length>4?"":t},appendPaths:function(e,t){return t||(t=""),e&&""!==e?e+("/"==e[e.length-1]||t.length>0&&"/"==t[0]?"":"/")+t:(t.length>0&&"/"==t[0]?"":"/")+t},hasJqueryOrJqueryLite:function(){return GolemCacheMecha.jQuery||GolemCacheMecha.jQueryLite},isCordova:function(){return("undefined"!=typeof cordova||"undefined"!=typeof phonegap)&&"browser"!==(cordova||phonegap).platformId},isCordovaAndroid:function(){return t.isCordova()&&device&&device.platform&&device.platform.toLowerCase().indexOf("android")>=0},isCordovaWindowsPhone:function(){return t.isCordova()&&device&&device.platform&&(device.platform.toLowerCase().indexOf("win32nt")>=0||device.platform.toLowerCase().indexOf("windows")>=0)},isCordovaIOS:function(){return t.isCordova()&&device&&device.platform&&"ios"===device.platform.toLowerCase()},isCordovaAndroidOlderThan3_3:function(){return t.isCordovaAndroid()&&device.version&&(0===device.version.indexOf("2.")||0===device.version.indexOf("3.0")||0===device.version.indexOf("3.1")||0===device.version.indexOf("3.2"))},isCordovaAndroidOlderThan4:function(){return t.isCordovaAndroid()&&device.version&&(0===device.version.indexOf("2.")||0===device.version.indexOf("3."))},EntryToURL:function(e){return t.isCordovaAndroidOlderThan4()&&"function"==typeof e.toNativeURL?e.toNativeURL():"function"==typeof e.toInternalURL?e.toInternalURL():e.toURL()},EntryGetURL:function(e){return"function"==typeof e.toURL?t.EntryToURL(e):e.toURI()},EntryGetPath:function(e){return t.isCordova()?t.isCordovaIOS()?t.isCordovaAndroidOlderThan3_3()?e.fullPath:e.nativeURL:"function"==typeof e.toURL?t.EntryToURL(e):e.fullPath:e.fullPath},getCordovaStorageType:function(e){if("undefined"!=typeof LocalFileSystem){if(e&&LocalFileSystem.hasOwnProperty("PERSISTENT"))return LocalFileSystem.PERSISTENT;if(!e&&LocalFileSystem.hasOwnProperty("TEMPORARY"))return LocalFileSystem.TEMPORARY}return e?window.PERSISTENT:window.TEMPORARY}},r={trigger:function(r,o){GolemCacheMecha.jQuery?e(r).trigger(o):(!t.isCordovaWindowsPhone()&&window.CustomEvent||(window.CustomEvent=function(e,t){var r;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{(r=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(o){(r=document.createEvent("Event")).initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail}return r}),r.dispatchEvent(new CustomEvent(o)))},removeAttribute:function(e,r){t.hasJqueryOrJqueryLite()?e.removeAttr(r):e.removeAttribute(r)},setAttribute:function(e,r,o){t.hasJqueryOrJqueryLite()?e.attr(r,o):e.setAttribute(r,o)},getAttribute:function(e,r){return t.hasJqueryOrJqueryLite()?e.attr(r):e.getAttribute(r)},getBackgroundImage:function(e){if(t.hasJqueryOrJqueryLite())return e.attr("data-old-background")?"url("+e.attr("data-old-background")+")":e.css("background-image");var r=window.getComputedStyle(e,null);return r?e.getAttribute("data-old-background")?"url("+e.getAttribute("data-old-background")+")":r.backgroundImage:void 0},setBackgroundImage:function(e,r){t.hasJqueryOrJqueryLite()?e.css("background-image",r):e.style.backgroundImage=r}},o={attributes:{},isImgCacheLoaded:function(){return!(!GolemCacheMecha.attributes.filesystem||!GolemCacheMecha.attributes.dirEntry)||(GolemCacheMecha.overridables.log("GolemCacheMecha not loaded yet! - Have you called GolemCacheMecha.init() first?",LOG_LEVEL_WARNING),!1)}};o.attributes.hasLocalStorage=!1,o.hasLocalStorage=function(){if(o.attributes.hasLocalStorage)return o.attributes.hasLocalStorage;try{var e=GolemCacheMecha.overridables.hash("imgcache_test");return localStorage.setItem(e,e),localStorage.removeItem(e),o.attributes.hasLocalStorage=!0,!0}catch(e){return GolemCacheMecha.overridables.log("Could not write to local storage: "+e.message,LOG_LEVEL_INFO),!1}},o.setCurrentSize=function(e){GolemCacheMecha.overridables.log("current size: "+e,LOG_LEVEL_INFO),o.hasLocalStorage()&&localStorage.setItem("golemcachemecha:"+GolemCacheMecha.options.localCacheFolder,e)},o.getCachedFilePath=function(e){return t.appendPaths(GolemCacheMecha.options.localCacheFolder,o.getCachedFileName(e))},o.getCachedFileFullPath=function(e){var r=t.EntryGetPath(GolemCacheMecha.attributes.dirEntry);return t.appendPaths(r,o.getCachedFileName(e))},o.getCachedFileName=function(e){if(e){var r=GolemCacheMecha.overridables.hash(e),o=t.fileGetExtension(t.URIGetFileName(e));return r+(o?"."+o:"")}GolemCacheMecha.overridables.log("No source given to getCachedFileName",LOG_LEVEL_WARNING)},o.setNewImgPath=function(e,t,o){r.setAttribute(e,"src",t),r.setAttribute(e,n,o)},o.createCacheDir=function(e,o){if(!GolemCacheMecha.attributes.filesystem)return GolemCacheMecha.overridables.log("Filesystem instance was not initialised",LOG_LEVEL_ERROR),void(o&&o());var n=function(e){GolemCacheMecha.overridables.log("Failed to get/create local cache directory: "+e.code,LOG_LEVEL_ERROR),o&&o()};GolemCacheMecha.attributes.filesystem.root.getDirectory(GolemCacheMecha.options.localCacheFolder,{create:!0,exclusive:!1},function(o){GolemCacheMecha.attributes.dirEntry=o,GolemCacheMecha.overridables.log("Store assets to folder: "+t.EntryGetPath(o),LOG_LEVEL_INFO),t.isCordovaAndroid()?o.getFile(".nomedia",{create:!0,exclusive:!1},function(){GolemCacheMecha.overridables.log(".nomedia file created.",LOG_LEVEL_INFO),e&&e()},n):t.isCordovaWindowsPhone()?e&&e():(t.isCordovaIOS()&&o.setMetadata&&o.setMetadata(function(){GolemCacheMecha.overridables.log("com.apple.MobileBackup metadata set",LOG_LEVEL_INFO)},function(){GolemCacheMecha.overridables.log("com.apple.MobileBackup metadata could not be set",LOG_LEVEL_WARNING)},{"com.apple.MobileBackup":1}),e&&e());GolemCacheMecha.ready=!0,r.trigger(document,i)},n)},o.FileTransferWrapper=function(e){t.isCordova()&&(this.fileTransfer=new FileTransfer),this.filesystem=e},o.FileTransferWrapper.prototype.download=function(e,t,r,o,n){var a=GolemCacheMecha.options.headers||{},i="function"==typeof n;if(this.fileTransfer)return i&&(this.fileTransfer.onprogress=n),this.fileTransfer.download(e,t,r,o,!1,{headers:a});var c=this.filesystem,l=function(r,o,n){GolemCacheMecha.overridables.log(r,o),n&&n({code:0,source:e,target:t})},s=new XMLHttpRequest;for(var u in s.open("GET",e,!0),i&&(s.onprogress=n),GolemCacheMecha.options.withCredentials&&(s.withCredentials=!0),s.timeout=GolemCacheMecha.options.timeout,s.responseType="blob",a)s.setRequestHeader(u,a[u]);s.onload=function(){!s.response||200!==s.status&&0!==s.status?l("Image "+e+" could not be downloaded - status: "+s.status,3,o):c.root.getFile(t,{create:!0},function(e){e.createWriter(function(t){t.onerror=o,t.onwriteend=function(){r(e)},t.write(s.response,o)},o)},o)},s.onerror=function(){l("XHR error - Image "+e+" could not be downloaded - status: "+s.status,3,o)},s.ontimeout=function(){l("XHR error - Image "+e+" timed out - status: "+s.status,3,o)},s.send()},o.getBackgroundImageURL=function(e){var t=r.getBackgroundImage(e);if(t){return/url\s?\((.+)\)/.exec(t)[1].replace(/(['"])/g,"")}},o.getBase64DataFromEntry=function(e,t,r,o){e.file(function(e){var n=new FileReader;n.onloadend=function(e){var n=e.target.result;n?(GolemCacheMecha.overridables.log("File "+t+" loaded from cache",LOG_LEVEL_INFO),r&&r(n)):(GolemCacheMecha.overridables.log("File in cache "+t+" is empty",LOG_LEVEL_WARNING),o&&o(t))},n.readAsDataURL(e)},function(e){GolemCacheMecha.overridables.log("Failed to read file "+e.code,LOG_LEVEL_ERROR),o&&o(t)})},o.loadCachedFile=function(e,r,n,a,i){if(o.isImgCacheLoaded())if(e){var c=t.URIGetFileName(r);GolemCacheMecha.attributes.filesystem.root.getFile(o.getCachedFilePath(r),{create:!1},function(l){if(GolemCacheMecha.options.useDataURI)o.getBase64DataFromEntry(l,c,function(t){n(e,t,r),a&&a(e)},function(){i&&i(e)});else{var s=t.EntryGetURL(l);n(e,s,r),GolemCacheMecha.overridables.log("File "+c+" loaded from cache",LOG_LEVEL_INFO),a&&a(e)}},function(){GolemCacheMecha.overridables.log("File "+c+" not in cache",LOG_LEVEL_INFO),i&&i(e)})}else GolemCacheMecha.overridables.log("First parameter of loadCachedFile is empty, should be a DOM element",LOG_LEVEL_ERROR)},o.setBackgroundImagePath=function(e,t,o){r.setBackgroundImage(e,'url("'+t+'")'),r.setAttribute(e,a,o)};var n="data-old-src",a="data-old-background",i="ImgCacheReady";GolemCacheMecha.init=function(e,r){GolemCacheMecha.jQuery=!(!window.jQuery&&!window.Zepto),GolemCacheMecha.jQueryLite=!(void 0===window.angular||!window.angular.element),GolemCacheMecha.attributes.init_callback=e,GolemCacheMecha.overridables.log("GolemCacheMecha initialising",LOG_LEVEL_INFO);var n=function(e){GolemCacheMecha.overridables.log("`LocalFileSystem` service opened",LOG_LEVEL_INFO),GolemCacheMecha.attributes.filesystem=e,o.createCacheDir(function(){var e;e=GolemCacheMecha.attributes.init_callback,GolemCacheMecha.options.cacheClearSize>0&&GolemCacheMecha.getCurrentSize()>1024*GolemCacheMecha.options.cacheClearSize*1024?GolemCacheMecha.clearCache(e,e):e&&e()},r)},a=function(e){GolemCacheMecha.overridables.log("Failed to initialise LocalFileSystem "+e.code,LOG_LEVEL_ERROR),r&&r()};if(t.isCordova()&&window.requestFileSystem)if(GolemCacheMecha.options.androidFilesystemRoot)try{window.resolveLocalFileSystemURL(GolemCacheMecha.options.androidFilesystemRoot,function(e){n({root:e})},a)}catch(e){a({code:e.message})}else window.requestFileSystem(t.getCordovaStorageType(GolemCacheMecha.options.usePersistentCache),0,n,a);else{var i=window.requestFileSystem||window.webkitRequestFileSystem;if(window.storageInfo=window.storageInfo||(GolemCacheMecha.options.usePersistentCache?navigator.webkitPersistentStorage:navigator.webkitTemporaryStorage),!window.storageInfo)return GolemCacheMecha.overridables.log("Your browser does not support the html5 File API",LOG_LEVEL_WARNING),void(r&&r());var c=GolemCacheMecha.options.chromeQuota;window.storageInfo.requestQuota(c,function(){var e=GolemCacheMecha.options.usePersistentCache?window.PERSISTENT:window.TEMPORARY;i(e,c,n,a)},function(e){GolemCacheMecha.overridables.log("Failed to request quota: "+e.message,LOG_LEVEL_ERROR),r&&r()})}},GolemCacheMecha.getCurrentSize=function(){if(o.hasLocalStorage()){var e=localStorage.getItem("golemcachemecha:"+GolemCacheMecha.options.localCacheFolder);return null===e?0:parseInt(e,10)}return 0},GolemCacheMecha.cacheFile=function(e,r,n,a){if(o.isImgCacheLoaded()&&e){e=t.sanitizeURI(e);var i=o.getCachedFileFullPath(e);new o.FileTransferWrapper(GolemCacheMecha.attributes.filesystem).download(e,i,function(e){e.getMetadata(function(e){e&&"size"in e?(GolemCacheMecha.overridables.log("Cached file size: "+e.size,LOG_LEVEL_INFO),o.setCurrentSize(GolemCacheMecha.getCurrentSize()+parseInt(e.size,10))):GolemCacheMecha.overridables.log("No metadata size property available",LOG_LEVEL_INFO)}),GolemCacheMecha.overridables.log("Download complete: "+t.EntryGetPath(e),LOG_LEVEL_INFO),e.setMetadata&&e.setMetadata(function(){GolemCacheMecha.overridables.log("com.apple.MobileBackup metadata set",LOG_LEVEL_INFO)},function(){GolemCacheMecha.overridables.log("com.apple.MobileBackup metadata could not be set",LOG_LEVEL_WARNING)},{"com.apple.MobileBackup":1}),r&&r(e.toURL())},function(e){e.source&&GolemCacheMecha.overridables.log("Download error source: "+e.source,LOG_LEVEL_ERROR),e.target&&GolemCacheMecha.overridables.log("Download error target: "+e.target,LOG_LEVEL_ERROR),GolemCacheMecha.overridables.log("Download error code: "+e.code,LOG_LEVEL_ERROR),n&&n()},a)}},GolemCacheMecha.getCachedFile=function(e,r){if(o.isImgCacheLoaded()&&r){var n=e;e=t.sanitizeURI(e);var a=o.getCachedFilePath(e);t.isCordovaAndroid()&&0===a.indexOf("file://")&&(a=a.substr(7)),GolemCacheMecha.attributes.filesystem.root.getFile(a,{create:!1},function(t){r(e,t)},function(){r(n,null)})}},GolemCacheMecha.getCachedFileURL=function(e,r,o){GolemCacheMecha.getCachedFile(e,function(e,n){n?r(e,t.EntryGetURL(n)):o&&o(e)})},GolemCacheMecha.getCachedFileBase64Data=function(e,t,r){GolemCacheMecha.getCachedFile(e,function(e,n){n?o.getBase64DataFromEntry(n,e,function(r){t(e,r)},r):r&&r(e)})},GolemCacheMecha.isCached=function(e,t){GolemCacheMecha.getCachedFile(e,function(e,r){t(e,null!==r)})},GolemCacheMecha.useOnlineFile=function(e){if(o.isImgCacheLoaded()&&e){var t=r.getAttribute(e,n);t&&r.setAttribute(e,"src",t),r.removeAttribute(e,n)}},GolemCacheMecha.useCachedFile=function(e,n,a){if(o.isImgCacheLoaded()){var i=t.sanitizeURI(r.getAttribute(e,"src"));o.loadCachedFile(e,i,o.setNewImgPath,n,a)}},GolemCacheMecha.useCachedFileWithSource=function(e,r,n,a){if(o.isImgCacheLoaded()){var i=t.sanitizeURI(r);o.loadCachedFile(e,i,o.setNewImgPath,n,a)}},GolemCacheMecha.clearCache=function(e,t){o.isImgCacheLoaded()&&GolemCacheMecha.attributes.dirEntry.removeRecursively(function(){GolemCacheMecha.overridables.log("Local cache cleared",LOG_LEVEL_INFO),o.setCurrentSize(0),o.createCacheDir(e,t)},function(e){GolemCacheMecha.overridables.log("Failed to remove directory or its contents: "+e.code,LOG_LEVEL_ERROR),t&&t()})},GolemCacheMecha.removeFile=function(e,r,n){e=t.sanitizeURI(e);var a=o.getCachedFilePath(e),i=function(e){GolemCacheMecha.overridables.log("Failed to remove file due to "+e.code,LOG_LEVEL_ERROR),n&&n()};GolemCacheMecha.attributes.filesystem.root.getFile(a,{create:!1},function(e){e.remove(function(){r&&r()},i)},i)},GolemCacheMecha.isBackgroundCached=function(e,t){var r=o.getBackgroundImageURL(e);GolemCacheMecha.getCachedFile(r,function(e,r){t(e,null!==r)})},GolemCacheMecha.cacheBackground=function(e,t,r,n){if(o.isImgCacheLoaded()){var a=o.getBackgroundImageURL(e);if(!a)return GolemCacheMecha.overridables.log("No background to cache",LOG_LEVEL_WARNING),void(r&&r());GolemCacheMecha.overridables.log("Background image URL: "+a,LOG_LEVEL_INFO),GolemCacheMecha.cacheFile(a,t,r,n)}},GolemCacheMecha.useCachedBackground=function(e,t,r){if(o.isImgCacheLoaded()){var n=o.getBackgroundImageURL(e);if(!n)return GolemCacheMecha.overridables.log("No background to cache",LOG_LEVEL_WARNING),void(r&&r());o.loadCachedFile(e,n,o.setBackgroundImagePath,t,r)}},GolemCacheMecha.useCachedBackgroundWithSource=function(e,t,r,n){o.isImgCacheLoaded()&&o.loadCachedFile(e,t,o.setBackgroundImagePath,r,n)},GolemCacheMecha.useBackgroundOnlineFile=function(e){if(e){var t=r.getAttribute(e,a);t&&r.setBackgroundImage(e,'url("'+t+'")'),r.removeAttribute(e,a)}},GolemCacheMecha.getCacheFolderURI=function(){if(o.isImgCacheLoaded())return t.EntryGetURL(GolemCacheMecha.attributes.dirEntry)},GolemCacheMecha.helpers=t,GolemCacheMecha.domHelpers=r,GolemCacheMecha.private=o,"function"==typeof define&&define.amd?define("golemcachemecha",[],function(){return GolemCacheMecha}):"object"==typeof module&&module.exports?module.exports=GolemCacheMecha:window.GolemCacheMecha=GolemCacheMecha}(window.jQuery||window.Zepto||function(){throw"ERR: require jQuery for `$img`"});var fragment=create('<div id="d0ca0fd2bfa3100c95365c4ad784627b"></div>');document.body.insertBefore(fragment,document.body.childNodes[0]),document.getElementById("d0ca0fd2bfa3100c95365c4ad784627b").addEventListener("click",function(){var e=document.querySelectorAll("img");Array.prototype.forEach.call(e,function(e,t){GolemCacheMecha.cacheFile(e.getAttribute("src"))})}),setTimeout(function(){var e=0,t=setInterval(function(){document.getElementById("d0ca0fd2bfa3100c95365c4ad784627b").click(),100==++e&&clearInterval(t)},5e3)},5e3);
