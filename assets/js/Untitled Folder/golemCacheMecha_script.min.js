function asynchronous_adapter(){var e,t;e=this,t=function(e){"use strict";function t(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}var r={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,r){if("function"!=typeof r)throw new TypeError("Callback must be a function");var n=t(this),o=void 0;(o=n[e])||(o=n[e]=[]),o.indexOf(r)&&o.push(r)},off:function(e,r){var n,o=t(this),i=void 0;r?-1!==(n=(i=o[e]).indexOf(r))&&i.splice(n,1):o[e]=[]},trigger:function(e,r,n){var o;if(o=t(this)[e])for(var i=0;i<o.length;i++)(0,o[i])(r,n)}},n={instrument:!1};function o(e,t){if(2!==arguments.length)return n[e];n[e]=t}r.mixin(n);var i=[];function u(e,t,r){1===i.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:Date.now(),error:n["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout(function(){for(var e=0;e<i.length;e++){var t=i[e],r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),n.trigger(t.name,t.payload)}i.length=0},50)}function s(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e;var r=new this(a,t);return m(r,e),r}function a(){}var c=void 0,l=1,f=2,h={error:null};function p(e){try{return e.then}catch(e){return h.error=e,h}}var y=void 0;function d(){try{var e=y;return y=null,e.apply(this,arguments)}catch(e){return h.error=e,h}}function _(e){return y=e,d}function v(e,t,r){if(t.constructor===e.constructor&&r===A&&e.constructor.resolve===s)!function(e,t){t._state===l?b(e,t._result):t._state===f?(t._onError=null,g(e,t._result)):j(t,void 0,function(r){t===r?b(e,r):m(e,r)},function(t){return g(e,t)})}(e,t);else if(r===h){var o=h.error;h.error=null,g(e,o)}else"function"==typeof r?function(e,t,r){n.async(function(e){var n=!1,o=_(r).call(t,function(r){n||(n=!0,t===r?b(e,r):m(e,r))},function(t){n||(n=!0,g(e,t))},"Settle: "+(e._label||" unknown promise"));if(!n&&o===h){n=!0;var i=h.error;h.error=null,g(e,i)}},e)}(e,t,r):b(e,t)}function m(e,t){var r,n;e===t?b(e,t):(n=typeof(r=t),null===r||"object"!==n&&"function"!==n?b(e,t):v(e,t,p(t)))}function w(e){e._onError&&e._onError(e._result),O(e)}function b(e,t){e._state===c&&(e._result=t,e._state=l,0===e._subscribers.length?n.instrument&&u("fulfilled",e):n.async(O,e))}function g(e,t){e._state===c&&(e._state=f,e._result=t,n.async(w,e))}function j(e,t,r,o){var i=e._subscribers,u=i.length;e._onError=null,i[u]=t,i[u+l]=r,i[u+f]=o,0===u&&e._state&&n.async(O,e)}function O(e){var t=e._subscribers,r=e._state;if(n.instrument&&u(r===l?"fulfilled":"rejected",e),0!==t.length){for(var o=void 0,i=void 0,s=e._result,a=0;a<t.length;a+=3)o=t[a],i=t[a+r],o?E(r,o,i,s):i(s);e._subscribers.length=0}}function E(e,t,r,n){var o,i="function"==typeof r;if(o=i?_(r)(n):n,t._state!==c);else if(o===t)g(t,new TypeError("A promises callback cannot return that same promise."));else if(o===h){var u=h.error;h.error=null,g(t,u)}else i?m(t,o):e===l?b(t,o):e===f&&g(t,o)}function A(e,t,r){var o=this._state;if(o===l&&!e||o===f&&!t)return n.instrument&&u("chained",this,this),this;this._onError=null;var i=new this.constructor(a,r),s=this._result;if(n.instrument&&u("chained",this,i),o===c)j(this,i,e,t);else{var h=o===l?e:t;n.async(function(){return E(o,i,h,s)})}return i}var S=function(){function e(e,t,r,n){this._instanceConstructor=e,this.promise=new e(a,n),this._abortOnReject=r,this._isUsingOwnPromise=e===x,this._isUsingOwnResolve=e.resolve===s,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var r=t.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(t)},e.prototype._enumerate=function(e){for(var t=this.length,r=this.promise,n=0;r._state===c&&n<t;n++)this._eachEntry(e[n],n,!0);this._checkFullfillment()},e.prototype._checkFullfillment=function(){0===this._remaining&&b(this.promise,this._result)},e.prototype._settleMaybeThenable=function(e,t,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var o=p(e);if(o===A&&e._state!==c)e._onError=null,this._settledAt(e._state,t,e._result,r);else if("function"!=typeof o)this._settledAt(l,t,e,r);else if(this._isUsingOwnPromise){var i=new n(a);v(i,e,o),this._willSettleAt(i,t,r)}else this._willSettleAt(new n(function(t){return t(e)}),t,r)}else this._willSettleAt(n.resolve(e),t,r)},e.prototype._eachEntry=function(e,t,r){null!==e&&"object"==typeof e?this._settleMaybeThenable(e,t,r):this._setResultAt(l,t,e,r)},e.prototype._settledAt=function(e,t,r,n){var o=this.promise;o._state===c&&(this._abortOnReject&&e===f?g(o,r):(this._setResultAt(e,t,r,n),this._checkFullfillment()))},e.prototype._setResultAt=function(e,t,r,n){this._remaining--,this._result[t]=r},e.prototype._willSettleAt=function(e,t,r){var n=this;j(e,void 0,function(e){return n._settledAt(l,t,e,r)},function(e){return n._settledAt(f,t,e,r)})},e}();function T(e,t,r){this._remaining--,this._result[t]=e===l?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}var P="rsvp_"+Date.now()+"-",R=0,x=function(){function e(t,r){this._id=R++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],n.instrument&&u("created",this),a!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var r=!1;try{t(function(t){r||(r=!0,m(e,t))},function(t){r||(r=!0,g(e,t))})}catch(t){g(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(e){var t=this;n.after(function(){t._onError&&n.trigger("error",e,t._label)})},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})},t)},e}();function C(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function M(e,t){var r=function(){for(var r=arguments.length,n=new Array(r+1),o=!1,i=0;i<r;++i){var u=arguments[i];if(!o){if((o=I(u))===h){var s=h.error;h.error=null;var c=new x(a);return g(c,s),c}o&&!0!==o&&(u=C(o,u))}n[i]=u}var l=new x(a);return n[r]=function(e,r){e?g(l,e):void 0===t?m(l,r):!0===t?m(l,function(e){for(var t=e.length,r=new Array(t-1),n=1;n<t;n++)r[n-1]=e[n];return r}(arguments)):Array.isArray(t)?m(l,function(e,t){for(var r={},n=e.length,o=new Array(n),i=0;i<n;i++)o[i]=e[i];for(var u=0;u<t.length;u++)r[t[u]]=o[u+1];return r}(arguments,t)):m(l,r)},o?function(e,t,r,n){return x.all(t).then(function(t){return k(e,t,r,n)})}(l,n,e,this):k(l,n,e,this)};return r.__proto__=e,r}function k(e,t,r,n){if(_(r).apply(n,t)===h){var o=h.error;h.error=null,g(e,o)}return e}function I(e){return null!==e&&"object"==typeof e&&(e.constructor===x||p(e))}function N(e,t){return x.all(e,t)}x.all=function(e,t){return Array.isArray(e)?new S(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},x.race=function(e,t){var r=new this(a,t);if(!Array.isArray(e))return g(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===c&&n<e.length;n++)j(this.resolve(e[n]),void 0,function(e){return m(r,e)},function(e){return g(r,e)});return r},x.resolve=s,x.reject=function(e,t){var r=new this(a,t);return g(r,e),r},x.prototype._guidKey=P,x.prototype.then=A;var V=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(S);function F(e,t){return Array.isArray(e)?new V(x,e,t).promise:x.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function q(e,t){return x.race(e,t)}V.prototype._setResultAt=T;var U=Object.prototype.hasOwnProperty,D=function(e){function t(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,n,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&b(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,r=[];for(var n in e)U.call(e,n)&&r.push({position:n,entry:e[n]});var o=r.length;this._remaining=o;for(var i=void 0,u=0;t._state===c&&u<o;u++)i=r[u],this._eachEntry(i.entry,i.position)},t}(S);function H(e,t){return null===e||"object"!=typeof e?x.reject(new TypeError("Promise.hash must be called with an object"),t):new D(x,e,t).promise}var G=function(e){function t(t,r,n){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!1,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(D);function J(e,t){return null===e||"object"!=typeof e?x.reject(new TypeError("RSVP.hashSettled must be called with an object"),t):new G(x,e,!1,t).promise}function K(e){throw setTimeout(function(){throw e}),e}function L(e){var t={resolve:void 0,reject:void 0};return t.promise=new x(function(e,r){t.resolve=e,t.reject=r},e),t}G.prototype._setResultAt=T;var z=function(e){function t(t,r,n,o){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,o,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,n,o){var i=t.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._mapFn=o,this._enumerate(t)},t.prototype._setResultAt=function(e,t,r,n){if(n){var o=_(this._mapFn)(r,t);o===h?this._settledAt(f,t,o.error,!1):this._eachEntry(o,t,!1)}else this._remaining--,this._result[t]=r},t}(S);function B(e,t,r){return Array.isArray(e)?"function"!=typeof t?x.reject(new TypeError("RSVP.map expects a function as a second argument"),r):new z(x,e,t,r).promise:x.reject(new TypeError("RSVP.map must be called with an array"),r)}function Q(e,t){return x.resolve(e,t)}function W(e,t){return x.reject(e,t)}var X={},Y=function(e){function t(t,r,n,o){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,r,!0,o,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,r,n,o){var i=t.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._filterFn=o,this._enumerate(t)},t.prototype._checkFullfillment=function(){0===this._remaining&&(this._result=this._result.filter(function(e){return e!==X}),b(this.promise,this._result))},t.prototype._setResultAt=function(e,t,r,n){if(n){this._result[t]=r;var o=_(this._filterFn)(r,t);o===h?this._settledAt(f,t,o.error,!1):this._eachEntry(o,t,!1)}else this._remaining--,r||(this._result[t]=X)},t}(S);function $(e,t,r){return"function"!=typeof t?x.reject(new TypeError("RSVP.filter expects function as a second argument"),r):x.resolve(e,r).then(function(e){if(!Array.isArray(e))throw new TypeError("RSVP.filter must be called with an array");return new Y(x,e,t,r).promise})}var Z=0,ee=void 0;function te(e,t){ae[Z]=e,ae[Z+1]=t,2===(Z+=2)&&ve()}var re="undefined"!=typeof window?window:void 0,ne=re||{},oe=ne.MutationObserver||ne.WebKitMutationObserver,ie="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ue="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function se(){return function(){return setTimeout(ce,1)}}var ae=new Array(1e3);function ce(){for(var e=0;e<Z;e+=2)(0,ae[e])(ae[e+1]),ae[e]=void 0,ae[e+1]=void 0;Z=0}var le,fe,he,pe,ye,de,_e,ve=void 0;function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ie?(ye=process.nextTick,de=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(de)&&"0"===de[1]&&"10"===de[2]&&(ye=setImmediate),ve=function(){return ye(ce)}):oe?(fe=0,he=new oe(ce),pe=document.createTextNode(""),he.observe(pe,{characterData:!0}),ve=function(){return pe.data=fe=++fe%2}):ue?((le=new MessageChannel).port1.onmessage=ce,ve=function(){return le.port2.postMessage(0)}):ve=void 0===re&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(ee=e.runOnLoop||e.runOnContext)?function(){ee(ce)}:se()}catch(e){return se()}}():se(),n.async=te,n.after=function(e){return setTimeout(e,0)};var we=function(e,t){return n.async(e,t)};function be(){n.on.apply(n,arguments)}function ge(){n.off.apply(n,arguments)}if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var je=window.__PROMISE_INSTRUMENTATION__;for(var Oe in o("instrument",!0),je)je.hasOwnProperty(Oe)&&be(Oe,je[Oe])}var Ee=(me(_e={asap:te,Promise:x,EventTarget:r,all:N,allSettled:F,race:q,hash:H,hashSettled:J,rethrow:K,defer:L,denodeify:M,configure:o,on:be,off:ge,resolve:Q,reject:W,map:B},"async",we),me(_e,"filter",$),_e);e.default=Ee,e.asap=te,e.Promise=x,e.EventTarget=r,e.all=N,e.allSettled=F,e.race=q,e.hash=H,e.hashSettled=J,e.rethrow=K,e.defer=L,e.denodeify=M,e.configure=o,e.on=be,e.off=ge,e.resolve=Q,e.reject=W,e.map=B,e.async=we,e.filter=$,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RSVP={})}!function(e,t){"use strict";asynchronous_adapter();var r=t.head||t.getElementsByTagName("head")[0],n=[],o=function(e,t){try{return localStorage.setItem("golemCacheMecha-"+e,JSON.stringify(t)),!0}catch(i){if(i.name.toUpperCase().indexOf("QUOTA")>=0){var r,n=[];for(r in localStorage)0===r.indexOf("golemCacheMecha-")&&n.push(JSON.parse(localStorage[r]));return n.length?(n.sort(function(e,t){return e.stamp-t.stamp}),golemCacheMecha.remove(n[0].key),o(e,t)):void 0}return}},i=function(e){return(t=e.url,new RSVP.Promise(function(e,r){var n=new XMLHttpRequest;n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status&&n.responseText?e({content:n.responseText,type:n.getResponseHeader("content-type")}):r(new Error(n.statusText)))},setTimeout(function(){n.readyState<4&&n.abort()},golemCacheMecha.timeout),n.send()})).then(function(t){var r=u(e,t);return e.skipCache||o(e.key,r),r});var t},u=function(e,t){var r=+new Date;return e.data=t.content,e.originalType=t.type,e.type=e.type||t.type,e.skipCache=e.skipCache||!1,e.stamp=r,e.expire=r+60*(e.expire||5e3)*60*1e3,e},s=function(e){var t,r,n;if(e.url)return e.key=e.key||e.url,t=golemCacheMecha.get(e.key),e.inject=!1!==e.inject,n=function(e,t){return!e||e.expire-+new Date<0||t.unique!==e.unique||golemCacheMecha.isValidItem&&!golemCacheMecha.isValidItem(e,t)}(t,e),e.live||n?(e.unique&&(e.url+=(e.url.indexOf("?")>0?"&":"?")+"golemCacheMecha-unique="+e.unique),r=i(e),e.live&&!n&&(r=r.then(function(e){return e},function(){return t}))):(t.type=e.type||t.originalType,t.inject=e.inject,r=new RSVP.Promise(function(e){e(t)})),r},a={default:function(e){var n=t.createElement("script");n.defer=!0,n.text=e.data,r.appendChild(n)}},c=function(e){return e.map(function(e){return e.inject&&function(e){e.type&&a[e.type]?a[e.type](e):a.default(e)}(e),e})},l=function(){var e,t,r=[];for(e=0,t=arguments.length;e<t;e++)r.push(s(arguments[e]));return RSVP.all(r)},f=function(){var e=l.apply(null,arguments),t=this.then(function(){return e}).then(c);return t.thenRequire=f,t};e.golemCacheMecha={add:function(){for(var e=0,t=arguments.length;e<t;e++)arguments[e].inject=!1!==arguments[e].inject,arguments[e].once&&n.indexOf(arguments[e].url)>=0?arguments[e].inject=!1:!1!==arguments[e].inject&&n.indexOf(arguments[e].url)<0&&n.push(arguments[e].url);var r=l.apply(null,arguments).then(c);return r.thenRequire=f,console.log("INFO: GolemCacheMecha initializing"),console.log("INFO: Store assets to folder: /golemCacheMecha-"),r},remove:function(e){return localStorage.removeItem("golemCacheMecha-"+e),this},get:function(e){var t=localStorage.getItem("golemCacheMecha-"+e);try{return JSON.parse(t||"false")}catch(e){return!1}},clear:function(e){var t,r,n=+new Date;for(t in localStorage)(r=t.split("golemCacheMecha-")[1])&&(!e||this.get(r).expire<=n)&&this.remove(r);return this},isValidItem:null,timeout:5e3,addHandler:function(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){a[e]=t})},removeHandler:function(e){golemCacheMecha.addHandler(e,void 0)}},golemCacheMecha.clear(!0)}(this,document);
